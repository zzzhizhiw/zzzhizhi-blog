[{"content":"I am using the PaperMod theme, and this article uses it as an example.\nTable of Contents If you want to display a table of contents on the article page, note the following configuration:\n1 2 3 params: showToc: true # Show table of contents globally tocopen: true # Expand the table of contents globally (the table is collapsed by default) Multilingual It‚Äôs easy to make mistakes here. If you, like me, want a multilingual blog, pay attention to:\n1 2 defaultContentLanguage: zh-cn defaultContentLanguageInSubdir: true defaultContentLanguage: zh-cn\nSets the default language to Simplified Chinese Affects the URL structure generated by Hugo Determines the language identifier for default content The above configuration should not be modified unless you specifically need to change the default language.\ndefaultContentLanguageInSubdir: true\nControls whether default language content is placed in a subdirectory true: default path is /zh-cn/posts/ false: default path is /posts/ Example:\n1 2 3 4 5 6 7 8 9 10 11 12 # When defaultContentLanguageInSubdir: true public/ ‚îú‚îÄ‚îÄ zh-cn/ ‚îÇ ‚îî‚îÄ‚îÄ posts/ ‚îî‚îÄ‚îÄ en/ ‚îî‚îÄ‚îÄ posts/ # When defaultContentLanguageInSubdir: false public/ ‚îú‚îÄ‚îÄ posts/ ‚îî‚îÄ‚îÄ en/ ‚îî‚îÄ‚îÄ posts/ You need to configure the multilingual content directory:\n1 2 3 4 5 6 7 8 9 languages: zh-cn: languageName: \u0026#34;ÁÆÄ‰Ωì‰∏≠Êñá\u0026#34; contentDir: \u0026#34;/content/zh-cn\u0026#34; # /content/\u0026lt;lang\u0026gt; # ... other multilingual configurations ... en: languageName: \u0026#34;English\u0026#34; contentDir: \u0026#34;/content/en\u0026#34; # ... Under multilingual configuration, the valid paths for search.md and archive.md are:\n1 2 3 4 5 6 7 8 9 content/ ‚îú‚îÄ‚îÄ zh-cn/ ‚îÇ ‚îú‚îÄ‚îÄ posts/ ‚îÇ ‚îú‚îÄ‚îÄ search.zh-cn.md # search.\u0026lt;lang\u0026gt;.md ‚îÇ ‚îî‚îÄ‚îÄ archive.md ‚îî‚îÄ‚îÄ en/ ‚îú‚îÄ‚îÄ posts/ ‚îú‚îÄ‚îÄ search.en.md ‚îî‚îÄ‚îÄ archive.md The URLs of both in hugo.yaml can remain generally configured:\n1 2 3 4 5 6 7 8 9 10 11 12 languages: zh-cn: menu: main: - identifier: \u0026#34;search\u0026#34; name: \u0026#34;ÊêúÁ¥¢\u0026#34; url: \u0026#34;/search\u0026#34; weight: 1 - identifier: \u0026#34;archives\u0026#34; name: \u0026#34;ÂΩíÊ°£\u0026#34; url: \u0026#34;/archives\u0026#34; weight: 2 Search To support search functionality, the following configuration must be done in hugo.yaml:\n1 2 3 4 5 outputs: home: - HTML - RSS - JSON # JSON is the key to enabling search Fonts I wanted to use Ubuntu Mono for English, HarmonyOS Sans SC for Chinese, and JetBrains Mono for code, so I added the following configuration.\nCreate /themes/PaperMod/assets/css/extended/fonts.css:\n1 2 3 4 5 6 7 8 9 10 11 @import url(\u0026#39;https://cdn.jsdelivr.net/npm/ubuntu-mono/css/ubuntu-mono.min.css?display=swap\u0026#39;); @import url(\u0026#39;https://cdn.jsdelivr.net/npm/harmonyos-sans-font/css/harmonyos-sans.min.css?display=swap\u0026#39;); @import url(\u0026#39;https://cdn.jsdelivr.net/npm/jetbrains-mono/css/jetbrains-mono.min.css?display=swap\u0026#39;); body { font-family: \u0026#34;Ubuntu Mono\u0026#34;, \u0026#34;HarmonyOS Sans SC\u0026#34;, sans-serif; } code, pre { font-family: \u0026#34;JetBrains Mono\u0026#34;, monospace; } Code Block Background Color By default, the brightness of the code block background is very low (quite dark). I modified it slightly.\nIn /themes/PaperMod/assets/css/common/post-single.css around line 206, you can see the variable --code-block-bg controlling the code block background color:\n1 2 3 4 5 6 7 8 9 10 .post-content pre code { display: grid; margin: auto 0; padding: 10px; color: rgb(213, 213, 214); background: var(--code-block-bg) !important; border-radius: var(--radius); overflow-x: auto; word-break: break-all; } Search globally and find /themes/PaperMod/assets/css/core/theme-vars.css, where this variable is declared in two places:\n1 2 3 4 5 6 7 8 9 10 11 :root { ... --code-block-bg: rgb(43, 43, 43); ... } .dark { ... --code-block-bg: rgb(43, 43, 43); ... } Set both to rgb(43, 43, 43).\nComments I use Giscus, which leverages GitHub Discussions as a commenting system.\nMake sure:\nThe blog repository is public, or visitors can‚Äôt view the Discussions. The giscus app is installed, or visitors can‚Äôt comment or respond. Discussions is enabled in the repository. Then, go to the Giscus site and configure as required.\nAfter configuration, under ‚ÄúEnable giscus,‚Äù content like the following will appear:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 \u0026lt;script src=\u0026#34;https://giscus.app/client.js\u0026#34; data-repo=\u0026#34;[enter repository here]\u0026#34; data-repo-id=\u0026#34;[enter repository ID here]\u0026#34; data-category=\u0026#34;[enter category name here]\u0026#34; data-category-id=\u0026#34;[enter category ID here]\u0026#34; data-mapping=\u0026#34;pathname\u0026#34; data-strict=\u0026#34;0\u0026#34; data-reactions-enabled=\u0026#34;1\u0026#34; data-emit-metadata=\u0026#34;0\u0026#34; data-input-position=\u0026#34;bottom\u0026#34; data-theme=\u0026#34;preferred_color_scheme\u0026#34; data-lang=\u0026#34;zh-CN\u0026#34; crossorigin=\u0026#34;anonymous\u0026#34; async\u0026gt; \u0026lt;/script\u0026gt; Create /layouts/partials/comments.html and copy the \u0026lt;script\u0026gt; tag.\nEnsure hugo.yaml has comments enabled:\n1 2 params: comments: true Deployment After running hugo -D, Hugo builds the static blog into /public. Typically, delete /public before each build to avoid issues.\nI only want to deploy the static blog, not the entire Hugo framework, so I wrote a Shell script:\n1 2 3 4 5 6 7 8 9 10 11 12 13 @echo off hugo -D cd public git init git remote add origin git@github.com:zzzhizhiw/zzzhizhi-blog.git git checkout -b main git fetch git add -A git commit -m \u0026#34;temp\u0026#34; git reset --soft origin/main git commit -m \u0026#34;update %date%\u0026#34; git push cd .. Due to maintenance difficulties, I switched to using separate source and deployment branches within the same repository. Therefore:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 # Create public branch in main repository git checkout --orphan public git reset --hard git commit --allow-empty -m \u0026#34;Init public branch\u0026#34; git push origin public git checkout main # Link public directory to public branch git worktree add -B public public origin/public # Generate site and push hugo -D cd public git add -A git commit -m \u0026#34;Push %date%\u0026#34; git push origin public cd .. With Cloudflare Pages CI/CD, a single script can push updates with one command.\nDo not configure baseURL in hugo.yaml; otherwise, all unique preview URLs will be redirected to baseURL.\nhugo.yaml Example Below is the hugo.yaml I use:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 languageCode: zh-cn theme: PaperMod pagination: paperSize: 5 enableRobotsTXT: true buildDrafts: false buildFuture: true buildExpired: true enableEmoji: true enableGitInfo: true minify: disableXML: true minifyOutput: true params: env: production keywords: [Ëá¥‰πã, zzzhizhi, Blog] images: [\u0026#34;\u0026lt;link or path of image for opengraph, twitter-cards\u0026gt;\u0026#34;] DateFormat: \u0026#34;2006-01-02\u0026#34; defaultTheme: auto disableThemeToggle: false ShowReadingTime: true ShowShareButtons: false ShowPostNavLinks: true ShowBreadCrumbs: true ShowCodeCopyButtons: true ShowWordCount: true ShowRssButtonInSectionTermList: true UseHugoToc: true disableSpecial1stPost: false disableScrollToTop: false comments: true hidemeta: false hideSummary: false showToc: true tocopen: true assets: disableHLJS: true disableFingerprinting: true favicon: \u0026#34;/favicon.ico\u0026#34; favicon16x16: \u0026#34;/favicon-16x16.ico\u0026#34; favicon32x32: \u0026#34;/favicon-32x32.ico\u0026#34; apple_touch_icon: \u0026#34;/apple-touch-icon.jpg\u0026#34; safari_pinned_tab: \u0026#34;/safari-pinned-tab.svg\u0026#34; homeInfoParams: Title: \u0026#34;Hi there \\U0001F44B\u0026#34; Content: Welcome to my blog analytics: google: SiteVerificationTag: \u0026#34;XYZabc\u0026#34; bing: SiteVerificationTag: \u0026#34;XYZabc\u0026#34; yandex: SiteVerificationTag: \u0026#34;XYZabc\u0026#34; cover: hidden: true hiddenInList: true hiddenInSingle: true fuseOpts: isCaseSensitive: false shouldSort: true location: 0 distance: 1000 threshold: 0.4 minMatchCharLength: 0 limit: 10 keys: [\u0026#34;title\u0026#34;, \u0026#34;permalink\u0026#34;, \u0026#34;summary\u0026#34;, \u0026#34;content\u0026#34;] defaultContentLanguage: zh-cn defaultContentLanguageInSubdir: true languages: zh-cn: languageName: \u0026#34;ÁÆÄ‰Ωì‰∏≠Êñá\u0026#34; contentDir: \u0026#34;/content/zh-cn\u0026#34; weight: 1 title: \u0026#34;Ëá¥‰πã | zzzhizhi\u0026#34; description: \u0026#34;Ëá¥‰πãÁöÑÂçöÂÆ¢\u0026#34; params: author: \u0026#34;Ëá¥‰πã\u0026#34; label: text: \u0026#34;È¶ñÈ°µ\u0026#34; icon: \u0026#34;/apple-touch-icon.jpg\u0026#34; iconHeight: 35 profileMode: enabled: true title: \u0026#34;Ëá¥‰πã\u0026#34; subtitle: \u0026#34;ÂÜô‰ª£Á†ÅÊòØÁÉ≠Áà±ÔºåÂÜôÂà∞‰∏ñÁïåÂÖÖÊª°Áà±ÔºÅ\u0026#34; imageUrl: \u0026#34;/apple-touch-icon.jpg\u0026#34; buttons: - name: \u0026#34;ÂçöÂÆ¢\u0026#34; url: \u0026#34;posts\u0026#34; - name: \u0026#34;Ê†áÁ≠æ\u0026#34; url: \u0026#34;tags\u0026#34; homeInfoParams: Title: \u0026#34;‰Ω†Â•Ω üëã\u0026#34; Content: \u0026#34;Ê¨¢ËøéÊù•Âà∞ÊàëÁöÑÂçöÂÆ¢\u0026#34; socialIcons: - name: github url: \u0026#34;https://github.com/zzzhizhiw\u0026#34; - name: bilibili url: \u0026#34;https://space.bilibili.com/437297385\u0026#34; - name: email url: \u0026#34;mailto:mail@zzzhizhi.top\u0026#34; - name: rss url: \u0026#34;/zh-cn/index.xml\u0026#34; editPost: URL: \u0026#34;https://github.com/zzzhizhiw/zzzhizhi-blog\u0026#34; Text: \u0026#34;ÁºñËæë\u0026#34; appendFilePath: true menu: main: - identifier: \u0026#34;search\u0026#34; name: \u0026#34;ÊêúÁ¥¢\u0026#34; url: \u0026#34;/search\u0026#34; weight: 1 - identifier: \u0026#34;archives\u0026#34; name: \u0026#34;ÂΩíÊ°£\u0026#34; url: \u0026#34;/archives\u0026#34; weight: 2 - identifier: \u0026#34;categories\u0026#34; name: \u0026#34;ÂàÜÁ±ª\u0026#34; url: \u0026#34;/categories\u0026#34; weight: 3 - identifier: \u0026#34;tags\u0026#34; name: \u0026#34;Ê†áÁ≠æ\u0026#34; url: \u0026#34;/tags\u0026#34; weight: 4 en: languageName: \u0026#34;English\u0026#34; contentDir: \u0026#34;/content/en\u0026#34; weight: 2 title: \u0026#34;zzzhizhi | Ëá¥‰πã\u0026#34; description: \u0026#34;zzzhizhi\u0026#39;s blog\u0026#34; params: author: \u0026#34;zzzhizhi\u0026#34; label: text: \u0026#34;Home\u0026#34; icon: \u0026#34;/apple-touch-icon.jpg\u0026#34; iconHeight: 35 profileMode: enabled: true title: \u0026#34;zzzhizhi\u0026#34; subtitle: \u0026#34;Coding is love, coding to the world is full of love!\u0026#34; imageUrl: \u0026#34;/apple-touch-icon.jpg\u0026#34; buttons: - name: \u0026#34;Posts\u0026#34; url: \u0026#34;posts\u0026#34; - name: \u0026#34;Tags\u0026#34; url: \u0026#34;tags\u0026#34; homeInfoParams: Title: \u0026#34;Hi there üëã\u0026#34; Content: \u0026#34;Welcome to my blog\u0026#34; socialIcons: - name: github url: \u0026#34;https://github.com/zzzhizhiw\u0026#34; - name: bilibili url: \u0026#34;https://space.bilibili.com/437297385\u0026#34; - name: email url: \u0026#34;mailto:mail@zzzhizhi.top\u0026#34; - name: rss url: \u0026#34;/en/index.xml\u0026#34; editPost: URL: \u0026#34;https://github.com/zzzhizhiw/zzzhizhi-blog\u0026#34; Text: \u0026#34;Edit\u0026#34; appendFilePath: true menu: main: - identifier: \u0026#34;search\u0026#34; name: \u0026#34;Search\u0026#34; url: \u0026#34;/search\u0026#34; weight: 1 - identifier: \u0026#34;archives\u0026#34; name: \u0026#34;Archives\u0026#34; url: \u0026#34;/archives\u0026#34; weight: 2 - identifier: \u0026#34;categories\u0026#34; name: \u0026#34;Categories\u0026#34; url: \u0026#34;/categories\u0026#34; weight: 3 - identifier: \u0026#34;tags\u0026#34; name: \u0026#34;Tags\u0026#34; url: \u0026#34;/tags\u0026#34; weight: 4 outputs: home: - HTML - RSS - JSON markup: highlight: noClasses: false codeFences: true guessSyntax: true lineNos: true lineNumbersInTable: true style: monokai goldmark: renderer: unsafe: true tableOfContents: startLevel: 1 endLevel: 3 ordered: false ","permalink":"/en/posts/hugo-blog-setup-tips/","summary":"Summarizes the process of building a Hugo blog using PaperMod theme, including configuration and debugging tips.","title":"Hugo Blog Setup Experiences Summary"}]