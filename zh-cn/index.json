[{"content":"我用的主题是 PaperMod，本文用它来作示例。\n目录 如果要在文章页面中显示目录，请关注以下配置：\n1 2 3 params: showToc: true # 全局显示目录 tocopen: true # 全局目录展开（目录默认是折叠列表） 多语言 这里配置很容易出问题。如果你像我一样喜欢搞多语言博客，请关注以下配置：\n1 2 defaultContentLanguage: zh-cn defaultContentLanguageInSubdir: true defaultContentLanguage: zh-cn\n设置网站默认语言为简体中文 影响 Hugo 生成的 URL 结构 决定默认内容的语言标识 以上配置建议不要修改。\ndefaultContentLanguageInSubdir: true\n控制默认语言内容是否放在子目录中 true: 默认生成路径为 /zh-cn/posts/ false: 默认生成路径为 /posts/ 举例：\n1 2 3 4 5 6 7 8 9 10 11 12 # 当 defaultContentLanguageInSubdir: true public/ ├── zh-cn/ # 默认语言(中文)内容 │ └── posts/ └── en/ # 其他语言内容 └── posts/ # 当 defaultContentLanguageInSubdir: false public/ ├── posts/ # 默认语言(中文)内容 └── en/ # 其他语言内容 └── posts/ 需要配置多语言 content 目录：\n1 2 3 4 5 6 7 8 9 languages: zh-cn: languageName: \u0026#34;简体中文\u0026#34; contentDir: \u0026#34;/content/zh-cn\u0026#34; # /content/\u0026lt;lang\u0026gt; # ... 需要做多语言配置的配置都可以写进这里 en: languageName: \u0026#34;English\u0026#34; contentDir: \u0026#34;/content/en\u0026#34; # ... 在多语言配置下，search.md 和 archive.md 有效路径为：\n1 2 3 4 5 6 7 8 9 content/ ├── zh-cn/ │ ├── posts/ │ ├── search.zh-cn.md # search.\u0026lt;lang\u0026gt;.md │ └── archive.md └── en/ ├── posts/ ├── search.en.md └── archive.md 以上两者的 URL 在 hugo.yaml 中保持一般设置即可：\n1 2 3 4 5 6 7 8 9 10 11 12 languages: zh-cn: menu: main: - identifier: \u0026#34;search\u0026#34; name: \u0026#34;搜索\u0026#34; url: \u0026#34;/search\u0026#34; weight: 1 - identifier: \u0026#34;archives\u0026#34; name: \u0026#34;归档\u0026#34; url: \u0026#34;/archives\u0026#34; weight: 2 搜索 要支持搜索功能，必须在 hugo.yaml 中做如下配置：\n1 2 3 4 5 outputs: home: - HTML - RSS - JSON # JSON 是支持搜索的关键 字体 我想要英文使用 Ubuntu Mono，中文使用 HarmonyOS Sans SC，代码使用 JetBrains Mono，于是做了如下配置。\n新建 /themes/PaperMod/assets/css/extended/fonts.css：\n1 2 3 4 5 6 7 8 9 10 11 @import url(\u0026#39;https://cdn.jsdelivr.net/npm/ubuntu-mono/css/ubuntu-mono.min.css?display=swap\u0026#39;); @import url(\u0026#39;https://cdn.jsdelivr.net/npm/harmonyos-sans-font/css/harmonyos-sans.min.css?display=swap\u0026#39;); @import url(\u0026#39;https://cdn.jsdelivr.net/npm/jetbrains-mono/css/jetbrains-mono.min.css?display=swap\u0026#39;); body { font-family: \u0026#34;Ubuntu Mono\u0026#34;, \u0026#34;HarmonyOS Sans SC\u0026#34;, sans-serif; } code, pre { font-family: \u0026#34;JetBrains Mono\u0026#34;, monospace; } 代码块背景色 默认的代码块背景色亮度很低（非常黑），我修改了一下。\n在 /themes/PaperMod/assets/css/common/post-single.css 第 206 行处，可以看到 --code-block-bg 变量决定了代码块背景色：\n1 2 3 4 5 6 7 8 9 10 .post-content pre code { display: grid; margin: auto 0; padding: 10px; color: rgb(213, 213, 214); background: var(--code-block-bg) !important; border-radius: var(--radius); overflow-x: auto; word-break: break-all; } 全局搜索后发现 /themes/PaperMod/assets/css/core/theme-vars.css 中有两处声明了这个变量：\n1 2 3 4 5 6 7 8 9 10 11 :root { ... --code-block-bg: rgb(43, 43, 43); ... } .dark { ... --code-block-bg: rgb(43, 43, 43); ... } 都改成 rgb(43, 43, 43) 就可以了。\n评论 我使用的是 Giscus，它是利用 GitHub Discussions 实现的评论系统。\n请确保：\n博客仓库是公开的，否则访客将无法查看 Discussions。 giscus app 已安装，否则访客将无法评论和回应。 Discussions 功能已在仓库中启用。 然后访问 Giscus 网站，按要求进行配置。\n配置完成后，在“启用 giscus”标题下会出现形如以下内容：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 \u0026lt;script src=\u0026#34;https://giscus.app/client.js\u0026#34; data-repo=\u0026#34;[在此输入仓库]\u0026#34; data-repo-id=\u0026#34;[在此输入仓库 ID]\u0026#34; data-category=\u0026#34;[在此输入分类名]\u0026#34; data-category-id=\u0026#34;[在此输入分类 ID]\u0026#34; data-mapping=\u0026#34;pathname\u0026#34; data-strict=\u0026#34;0\u0026#34; data-reactions-enabled=\u0026#34;1\u0026#34; data-emit-metadata=\u0026#34;0\u0026#34; data-input-position=\u0026#34;bottom\u0026#34; data-theme=\u0026#34;preferred_color_scheme\u0026#34; data-lang=\u0026#34;zh-CN\u0026#34; crossorigin=\u0026#34;anonymous\u0026#34; async\u0026gt; \u0026lt;/script\u0026gt; 新建 /layouts/partials/comments.html，将得到的 \u0026lt;script\u0026gt; 标签复制粘贴进去。\n确保 hugo.yaml 中启用了评论：\n1 2 params: comments: true 推送 敲打 hugo -D 命令后，Hugo 会在 /public 目录下构建静态博客。每次构建前一般会将 /public 删掉来确保新构建的内容不出问题。\n在这种情况下，我希望只部署静态博客而不是整个 Hugo 框架。于是写了一个 Shell 脚本：\n1 2 3 4 5 6 7 8 9 10 11 12 13 @echo off hugo -D cd public git init git remote add origin git@github.com:zzzhizhiw/zzzhizhi-blog.git git checkout -b main git fetch git add -A git commit -m \u0026#34;temp\u0026#34; git reset --soft origin/main git commit -m \u0026#34;update %date%\u0026#34; git push cd .. 结合 Cloudflare Pages 自带 CI/CD，只需一个脚本即可实现一键推送更新。\n不要在 hugo.yaml 中配置 baseURL，这会导致所有部署唯一预览 URL 被重定向到 baseURL。\nhugo.yaml 示例 以下是我使用的 hugo.yaml。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 languageCode: zh-cn theme: PaperMod pagination: paperSize: 5 enableRobotsTXT: true buildDrafts: false buildFuture: true buildExpired: true enableEmoji: true enableGitInfo: true minify: disableXML: true minifyOutput: true params: env: production keywords: [致之, zzzhizhi, 博客, Blog] images: [\u0026#34;\u0026lt;link or path of image for opengraph, twitter-cards\u0026gt;\u0026#34;] DateFormat: \u0026#34;2006-01-02\u0026#34; defaultTheme: auto disableThemeToggle: false ShowReadingTime: true ShowShareButtons: false ShowPostNavLinks: true ShowBreadCrumbs: true ShowCodeCopyButtons: true ShowWordCount: true ShowRssButtonInSectionTermList: true UseHugoToc: true disableSpecial1stPost: false disableScrollToTop: false comments: true hidemeta: false hideSummary: false showToc: true tocopen: true assets: disableHLJS: true disableFingerprinting: true favicon: \u0026#34;/favicon.ico\u0026#34; favicon16x16: \u0026#34;/favicon-16x16.ico\u0026#34; favicon32x32: \u0026#34;/favicon-32x32.ico\u0026#34; apple_touch_icon: \u0026#34;/apple-touch-icon.jpg\u0026#34; safari_pinned_tab: \u0026#34;/safari-pinned-tab.svg\u0026#34; homeInfoParams: Title: \u0026#34;Hi there \\U0001F44B\u0026#34; Content: Welcome to my blog analytics: google: SiteVerificationTag: \u0026#34;XYZabc\u0026#34; bing: SiteVerificationTag: \u0026#34;XYZabc\u0026#34; yandex: SiteVerificationTag: \u0026#34;XYZabc\u0026#34; cover: hidden: true hiddenInList: true hiddenInSingle: true fuseOpts: isCaseSensitive: false shouldSort: true location: 0 distance: 1000 threshold: 0.4 minMatchCharLength: 0 limit: 10 keys: [\u0026#34;title\u0026#34;, \u0026#34;permalink\u0026#34;, \u0026#34;summary\u0026#34;, \u0026#34;content\u0026#34;] defaultContentLanguage: zh-cn defaultContentLanguageInSubdir: true languages: zh-cn: languageName: \u0026#34;简体中文\u0026#34; contentDir: \u0026#34;/content/zh-cn\u0026#34; weight: 1 title: \u0026#34;致之 | zzzhizhi\u0026#34; description: \u0026#34;致之的博客\u0026#34; params: author: \u0026#34;致之\u0026#34; label: text: \u0026#34;首页\u0026#34; icon: \u0026#34;/apple-touch-icon.jpg\u0026#34; iconHeight: 35 profileMode: enabled: true title: \u0026#34;致之\u0026#34; subtitle: \u0026#34;写代码是热爱，写到世界充满爱！\u0026#34; imageUrl: \u0026#34;/apple-touch-icon.jpg\u0026#34; buttons: - name: \u0026#34;博客\u0026#34; url: \u0026#34;posts\u0026#34; - name: \u0026#34;标签\u0026#34; url: \u0026#34;tags\u0026#34; homeInfoParams: Title: \u0026#34;你好 👋\u0026#34; Content: \u0026#34;欢迎来到我的博客\u0026#34; socialIcons: - name: github url: \u0026#34;https://github.com/zzzhizhiw\u0026#34; - name: bilibili url: \u0026#34;https://space.bilibili.com/437297385\u0026#34; - name: email url: \u0026#34;mailto:mail@zzzhizhi.top\u0026#34; - name: rss url: \u0026#34;/zh-cn/index.xml\u0026#34; editPost: URL: \u0026#34;https://github.com/zzzhizhiw/zzzhizhi-blog\u0026#34; Text: \u0026#34;编辑\u0026#34; appendFilePath: true menu: main: - identifier: \u0026#34;search\u0026#34; name: \u0026#34;搜索\u0026#34; url: \u0026#34;/search\u0026#34; weight: 1 - identifier: \u0026#34;archives\u0026#34; name: \u0026#34;归档\u0026#34; url: \u0026#34;/archives\u0026#34; weight: 2 - identifier: \u0026#34;categories\u0026#34; name: \u0026#34;分类\u0026#34; url: \u0026#34;/categories\u0026#34; weight: 3 - identifier: \u0026#34;tags\u0026#34; name: \u0026#34;标签\u0026#34; url: \u0026#34;/tags\u0026#34; weight: 4 en: languageName: \u0026#34;English\u0026#34; contentDir: \u0026#34;/content/en\u0026#34; weight: 2 title: \u0026#34;zzzhizhi | 致之\u0026#34; description: \u0026#34;zzzhizhi\u0026#39;s blog\u0026#34; params: author: \u0026#34;zzzhizhi\u0026#34; label: text: \u0026#34;Home\u0026#34; icon: \u0026#34;/apple-touch-icon.jpg\u0026#34; iconHeight: 35 profileMode: enabled: true title: \u0026#34;zzzhizhi\u0026#34; subtitle: \u0026#34;Coding is love, coding to the world is full of love!\u0026#34; imageUrl: \u0026#34;/apple-touch-icon.jpg\u0026#34; buttons: - name: \u0026#34;Posts\u0026#34; url: \u0026#34;posts\u0026#34; - name: \u0026#34;Tags\u0026#34; url: \u0026#34;tags\u0026#34; homeInfoParams: Title: \u0026#34;Hi there 👋\u0026#34; Content: \u0026#34;Welcome to my blog\u0026#34; socialIcons: - name: github url: \u0026#34;https://github.com/zzzhizhiw\u0026#34; - name: bilibili url: \u0026#34;https://space.bilibili.com/437297385\u0026#34; - name: email url: \u0026#34;mailto:mail@zzzhizhi.top\u0026#34; - name: rss url: \u0026#34;/en/index.xml\u0026#34; editPost: URL: \u0026#34;https://github.com/zzzhizhiw/zzzhizhi-blog\u0026#34; Text: \u0026#34;Edit\u0026#34; appendFilePath: true menu: main: - identifier: \u0026#34;search\u0026#34; name: \u0026#34;Search\u0026#34; url: \u0026#34;/search\u0026#34; weight: 1 - identifier: \u0026#34;archives\u0026#34; name: \u0026#34;Archives\u0026#34; url: \u0026#34;/archives\u0026#34; weight: 2 - identifier: \u0026#34;categories\u0026#34; name: \u0026#34;Categories\u0026#34; url: \u0026#34;/categories\u0026#34; weight: 3 - identifier: \u0026#34;tags\u0026#34; name: \u0026#34;Tags\u0026#34; url: \u0026#34;/tags\u0026#34; weight: 4 outputs: home: - HTML - RSS - JSON markup: highlight: noClasses: false codeFences: true guessSyntax: true lineNos: true lineNumbersInTable: true style: monokai goldmark: renderer: unsafe: true tableOfContents: startLevel: 1 endLevel: 3 ordered: false ","permalink":"/zh-cn/posts/hugo-blog-setup-tips/","summary":"总结了使用 PaperMod 主题搭建 Hugo 博客的过程，包括一些关键功能的配置和调试经验。","title":"Hugo 博客搭建经验总结"}]